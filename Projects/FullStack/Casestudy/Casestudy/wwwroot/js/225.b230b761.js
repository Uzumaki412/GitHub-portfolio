"use strict";(globalThis["webpackChunkvuecasestudy1"]=globalThis["webpackChunkvuecasestudy1"]||[]).push([[225],{2403:(t,e,s)=>{s.d(e,{G:()=>l,W:()=>r});const a="localhost"===window.location.hostname?"https://localhost:7211/api/":"/api/",l=async t=>{let e,s=o();try{let l=await fetch(`${a}${t}`,{method:"GET",headers:s});e=await l.json()}catch(t){console.log(t),e={error:`Error has occured: ${t.message}`}}return e},r=async(t,e)=>{let s,l=o();try{let r=await fetch(`${a}${t}`,{method:"POST",headers:l,body:JSON.stringify(e)});s=await r.json()}catch(t){s=t}return s},o=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},8304:(t,e,s)=>{s.d(e,{Y:()=>l,v:()=>a});const a=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"}),l=t=>{let e;e=void 0===t?new Date:new Date(Date.parse(t));let s=e.getDate(),a=e.getMonth()+1,l=e.getFullYear(),r=e.getMinutes();return r<10&&(r="0"+r),l+"-"+a+"-"+s}},9225:(t,e,s)=>{s.r(e),s.d(e,{default:()=>z});var a=s(1347),l=s(7763);const r={class:"text-center"},o={class:"text-h6 text-positive"},d={key:0,class:"row q-pa-sm bg-grey-1",style:{"border-bottom":"1px solid #e0e0e0"}},i=["onClick"],c={class:"col-4"},n={class:"col-4"},u={class:"text-h5 text-center text-primary"},g={class:"text-subtitle2 text-center text-grey-6"},h={class:"col-3"},v={class:"col-6"},m={class:"row no-wrap"},k={class:"col-4 text-center"},p={class:"col-4 text-center"},x={class:"col-4 text-center"},y={class:"col-3 text-right"},w={key:0,class:"q-pa-md",style:{"background-color":"#fafafa"}},b={class:"row justify-end q-mb-xs"},L={class:"col-3 text-right"},f={class:"row justify-end q-mb-xs"},_={class:"col-3 text-right"},q={class:"row justify-end"},D={class:"col-3 text-right text-weight-bold text-primary"};function O(t,e,s,O,S,F){const C=(0,a.g2)("q-avatar"),$=(0,a.g2)("q-card"),A=(0,a.g2)("q-scroll-area"),T=(0,a.g2)("q-btn"),E=(0,a.g2)("q-card-actions"),Q=(0,a.g2)("q-card-section"),j=(0,a.g2)("q-dialog"),I=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",r,[(0,a.bF)(C,{class:"q-mt-md big-avatar",size:"300px",square:""},{default:(0,a.k6)((()=>e[1]||(e[1]=[(0,a.Lk)("img",{src:"/img/i-want-to.png",style:{width:"100%",height:"100%","object-fit":"fill"}},null,-1)]))),_:1,__:[1]}),e[3]||(e[3]=(0,a.Lk)("div",{class:"text-h4 q-mt-md text-primary"},"Order History",-1)),(0,a.Lk)("div",o,(0,l.v_)(O.state.status),1),(0,a.bF)(A,{style:{height:"55vh"}},{default:(0,a.k6)((()=>[(0,a.bF)($,{class:"q-ma-md"},{default:(0,a.k6)((()=>[O.state.order.length>0?((0,a.uX)(),(0,a.CE)("div",d,e[2]||(e[2]=[(0,a.Lk)("div",{class:"col-4 text-weight-medium"},"#",-1),(0,a.Lk)("div",{class:"col-4 text-weight-medium"},"Date",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(O.state.order,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"row q-pa-sm",style:{"border-bottom":"1px solid #f0f0f0"},onClick:e=>O.selectedOrder(t.id)},[(0,a.Lk)("div",c,(0,l.v_)(t.id),1),(0,a.Lk)("div",n,(0,l.v_)(O.formatDate(t.orderDate)),1)],8,i)))),128))])),_:1})])),_:1})]),(0,a.bF)(j,{modelValue:O.state.showOrderDialog,"onUpdate:modelValue":e[0]||(e[0]=t=>O.state.showOrderDialog=t),"transition-show":"rotate","transition-hide":"rotate"},{default:(0,a.k6)((()=>[(0,a.bF)($,{style:{"min-width":"70vw","max-width":"90vw","min-height":"60vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(E,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(T,{flat:"",label:"X",color:"primary",class:"text-h5"},null,512),[[I]])])),_:1}),(0,a.bF)(Q,{class:"text-center"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",u," Tray #"+(0,l.v_)(O.state.selectedOrderId),1),(0,a.Lk)("div",g,(0,l.v_)(O.formatDate(O.state.orderDate)),1),(0,a.bF)(C,{class:"q-mt-md big-avatar",size:"300px",square:""},{default:(0,a.k6)((()=>e[4]||(e[4]=[(0,a.Lk)("img",{src:"/img/i-want-to.png",style:{width:"100%",height:"100%","object-fit":"fill"}},null,-1)]))),_:1,__:[4]})])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.bF)(A,{style:{height:"30vh"}},{default:(0,a.k6)((()=>[e[11]||(e[11]=(0,a.Lk)("div",{class:"row q-pa-sm bg-grey-2",style:{"border-bottom":"2px solid #1976d2"}},[(0,a.Lk)("div",{class:"col-3 text-weight-bold"},"Name"),(0,a.Lk)("div",{class:"col-6 text-center"},[(0,a.Lk)("div",{class:"text-weight-bold"},"Quantities"),(0,a.Lk)("div",{class:"row q-mt-xs no-wrap"},[(0,a.Lk)("div",{class:"col-4 text-center"},"S"),(0,a.Lk)("div",{class:"col-4 text-center"},"O"),(0,a.Lk)("div",{class:"col-4 text-center"},"B")])]),(0,a.Lk)("div",{class:"col-3 text-right text-weight-bold"},"Extended")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(O.state.orderDetails,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"row q-pa-sm",style:{"border-bottom":"1px solid #e0e0e0"}},[(0,a.Lk)("div",h,(0,l.v_)(t.productName),1),(0,a.Lk)("div",v,[(0,a.Lk)("div",m,[(0,a.Lk)("div",k,(0,l.v_)(t.qtySold),1),(0,a.Lk)("div",p,(0,l.v_)(t.qtyOrdered),1),(0,a.Lk)("div",x,(0,l.v_)(t.qtyOnBackOrder),1)])]),(0,a.Lk)("div",y,"$"+(0,l.v_)((t.msrp*t.qtySold).toFixed(2)),1)])))),128)),O.state.orderDetails.length>0?((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",b,[e[5]||(e[5]=(0,a.Lk)("div",{class:"col-6"},null,-1)),e[6]||(e[6]=(0,a.Lk)("div",{class:"col-3 text-right text-weight-medium"},"Sub:",-1)),(0,a.Lk)("div",L,"$"+(0,l.v_)(O.calculateSubtotal().toFixed(2)),1)]),(0,a.Lk)("div",f,[e[7]||(e[7]=(0,a.Lk)("div",{class:"col-6"},null,-1)),e[8]||(e[8]=(0,a.Lk)("div",{class:"col-3 text-right text-weight-medium"},"Tax(13%):",-1)),(0,a.Lk)("div",_,"$"+(0,l.v_)(O.calculateTax().toFixed(2)),1)]),(0,a.Lk)("div",q,[e[9]||(e[9]=(0,a.Lk)("div",{class:"col-6"},null,-1)),e[10]||(e[10]=(0,a.Lk)("div",{class:"col-3 text-right text-weight-bold text-primary"},"Total:",-1)),(0,a.Lk)("div",D,"$"+(0,l.v_)(O.calculateTotal().toFixed(2)),1)])])):(0,a.Q3)("",!0)])),_:1,__:[11]})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}s(939),s(6593);var S=s(4187),F=s(2403),C=s(8304);const $={setup(){let t=(0,S.Kh)({status:"",order:[],orderDetails:[],showOrderDialog:!1,selectedOrderId:null});const e=async()=>{let e=JSON.parse(sessionStorage.getItem("customer"));try{t.status="Loading orders...";let s=await(0,F.G)("order/"+e.email);t.order=s,t.status=`${s.length} Order(s) loaded successfully`}catch(e){t.status=`Error loading orders: ${e.message}`}},s=async e=>{let s=JSON.parse(sessionStorage.getItem("customer"));try{t.status=`Loading order ${e} details...`;let a=await(0,F.G)(`order/${e}/${s.email}`);t.orderDetails=a,console.log(t.orderDetails),t.showOrderDialog=!0,t.selectedOrderId=e,t.status=`Order ${e} details loaded successfully`}catch(e){console.log(e),t.status=`Error loading order details: ${e.message}`}};(0,a.sV)(e);const l=()=>t.orderDetails.reduce(((t,e)=>{const s=(e.msrp||0)*(e.qtySold||0);return t+s}),0),r=()=>.13*l(),o=()=>l()+r();return{state:t,formatDate:C.Y,selectedOrder:s,calculateSubtotal:l,calculateTax:r,calculateTotal:o}}};var A=s(2968),T=s(5305),E=s(6783),Q=s(3341),j=s(2540),I=s(5034),X=s(9039),N=s(222),B=s(1529),G=s(8657),J=s(272),K=s.n(J);const V=(0,A.A)($,[["render",O]]),z=V;K()($,"components",{QAvatar:T.A,QScrollArea:E.A,QCard:Q.A,QDialog:j.A,QCardActions:I.A,QBtn:X.A,QCardSection:N.A,QChip:B.A}),K()($,"directives",{ClosePopup:G.A})}}]);