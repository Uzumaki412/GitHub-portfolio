"use strict";(globalThis["webpackChunkvuecasestudy1"]=globalThis["webpackChunkvuecasestudy1"]||[]).push([[798],{2403:(t,e,a)=>{a.d(e,{G:()=>o,W:()=>n});const s="localhost"===window.location.hostname?"https://localhost:7211/api/":"/api/",o=async t=>{let e,a=l();try{let o=await fetch(`${s}${t}`,{method:"GET",headers:a});e=await o.json()}catch(t){console.log(t),e={error:`Error has occured: ${t.message}`}}return e},n=async(t,e)=>{let a,o=l();try{let n=await fetch(`${s}${t}`,{method:"POST",headers:o,body:JSON.stringify(e)});a=await n.json()}catch(t){a=t}return a},l=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},4798:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var s=a(1347),o=a(8633);const n={class:"text-center q-mt-md"},l={class:"q-mt-lg"},r={style:{height:"50vh",width:"90vw","margin-left":"5vw",border:"solid"},ref:"mapRef"};function i(t,e,a,i,c,d){const u=(0,s.g2)("q-input"),p=(0,s.g2)("q-btn"),h=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(h,{class:"q-pa-md"},{default:(0,s.k6)((()=>[e[2]||(e[2]=(0,s.Lk)("div",null,[(0,s.Lk)("img",{src:"/img/i-want-to.png",style:{"max-width":"150px"}})],-1)),(0,s.Lk)("div",l,[e[1]||(e[1]=(0,s.Lk)("h6",null,"Find 3 closest branches to:",-1)),(0,s.bF)(u,{class:"q-ma-lg text-h5",placeholder:"enter  address",id:"address",modelValue:i.state.address,"onUpdate:modelValue":e[0]||(e[0]=t=>i.state.address=t)},null,8,["modelValue"]),(0,s.bF)(p,{label:"Find 3",onClick:i.genMap,class:"q-mb-md",style:{width:"30vw"}},null,8,["onClick"])]),(0,s.bo)((0,s.Lk)("div",r,null,512),[[o.aG,!0===i.state.showmap]])])),_:1,__:[2]})])}a(939),a(4520),a(7049);var c=a(4187),d=a(2403);const u={name:"StoreLocator",setup(){const t=(0,c.KR)(null);let e=(0,c.Kh)({status:"",address:"",showmap:!1});const a=async t=>{try{let e=`https://api.tomtom.com/search/2/geocode/${t}.json?key=875GoTWQllatribOd3m0f6Z1huDMgs74`,a=await fetch(e),s=await a.json();return s.results[0].position}catch(t){e.status=t.message}},s=async(t,a)=>{try{let e=await(0,d.G)(`branch/${t}/${a}`);return e}catch(t){e.status=t.message}},o=async()=>{try{e.showmap=!0;const o=window.tt;let n=`https://api.tomtom.com/search/2/geocode/${e.address}.json?key=875GoTWQllatribOd3m0f6Z1huDMgs74`,l=await fetch(n),r=await l.json(),i=r.results[0].position.lat,c=r.results[0].position.lon,d=o.map({key:"875GoTWQllatribOd3m0f6Z1huDMgs74",container:t.value,source:"vector/1/basic-main",center:[c,i],zoom:10});d.addControl(new o.FullscreenControl),d.addControl(new o.NavigationControl);let u=await a(e.address);console.log(u);let p=await s(u.lat,u.lon);console.log(p),p.forEach((t=>{let e=(new o.Marker).setLngLat([t.longitude,t.latitude]).addTo(d),a=25,s=new o.Popup({offset:a});s.setHTML(`<div id="popup">Store#: ${t.id}</div><div>${t.street}, ${t.city}<br/>${t.distance.toFixed(2)} mi</div>`),e.setPopup(s)}))}catch(t){e.status=t.message}};return{mapRef:t,state:e,genMap:o,getLatLon:a,getClosestStores:s}}};var p=a(2968),h=a(5013),m=a(6067),g=a(9039),w=a(5305),y=a(272),v=a.n(y);const b=(0,p.A)(u,[["render",i]]),f=b;v()(u,"components",{QPage:h.A,QInput:m.A,QBtn:g.A,QAvatar:w.A})}}]);